<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  lang="ko"
	  layout:decorate="common/mylayout">
	<body>

		<th:block layout:fragment="css">
			<style>
				@keyframes fadeSlideIn {
					0% {
						opacity: 0;
						transform: translateY(-30px);
					}
					100% {
						opacity: 1;
						transform: translateY(0);
					}
				}

				.fade-slide {
					opacity: 0;
					animation: fadeSlideIn 0.8s ease-out forwards;
				}

				.fade-up-start {
					opacity: 0;
					transform: translateY(30px);
					transition: all 0.8s ease-out;
				}

				.fade-up-active {
					opacity: 1;
					transform: translateY(0);
				}

				.soft-float {
					animation: softFloat 6s ease-in-out infinite;
				}

				@keyframes softFloat {
					0%   { transform: translateY(0); }
					50%  { transform: translateY(-6px); } /* ë„ˆë¬´ í¬ë©´ ì–´ìƒ‰í•¨ */
					100% { transform: translateY(0); }
				}

				.wave-delay-1 { animation-delay: 0s; }
				.wave-delay-2 { animation-delay: 1.5s; }
				.wave-delay-3 { animation-delay: 3s; }
				.wave-delay-4 { animation-delay: 4.5s; }
				.wave-delay-5 { animation-delay: 6s; }

				@keyframes slideInLeft {
					0% {
						opacity: 0;
						transform: translateX(-50px);
					}
					100% {
						opacity: 1;
						transform: translateX(0);
					}
				}

				@keyframes slideInRight {
					0% {
						opacity: 0;
						transform: translateX(50px);
					}
					100% {
						opacity: 1;
						transform: translateX(0);
					}
				}

				/* ì´ˆê¸° ìƒíƒœ - íˆ¬ëª… + ì´ë™ëœ ìƒíƒœ */
				.slide-left, .slide-right {
					opacity: 0;
				}

				.slide-left {
					transform: translateX(-50px);
				}

				.slide-right {
					transform: translateX(50px);
				}

				/* í™”ë©´ì— ë“¤ì–´ì™”ì„ ë•Œ ì‹¤í–‰ë  ì• ë‹ˆë©”ì´ì…˜ */
				.slide-active-left {
					animation: slideInLeft 2s ease-out forwards;
				}

				.slide-active-right {
					animation: slideInRight 2s ease-out forwards;
				}

				.scale-container {
					width: 100%;
					max-width: 1440px;
					transform-origin: top center;
					margin: 0 auto;
				}
				.scale-container-2 {
					width: 100%;
					max-width: 1440px;
					transform-origin: top center;
					margin: 0 auto;
				}
				@media (min-width: 1440px) {
					.scale-container {
						transform: scale(1);
					}
				}

				#main-content-wrapper {
					position: relative;
				}
				#main-content-wrapper::before {
					content: '';
					position: absolute;
					top: 0;
					left: 0;
					right: 0;
					bottom: 0; /* ì´ ë¶€ë¶„ì€ ìœ ì§€í•´ë„ ë˜ì§€ë§Œ, í•µì‹¬ì€ box-shadow ê°’ì…ë‹ˆë‹¤. */
					z-index: 0;
					pointer-events: none;

					box-shadow: inset 0 20px 20px -20px rgba(0, 0, 0, 0.3);
				}
			</style>
		</th:block>

		<section layout:fragment="content" class="relative z-50">
			<main class="flex flex-col items-center justify-center">

				<!-- A.ì‹¤ì‚¬ìš© ì˜ìƒ + ê°„ë‹¨í•œ ì œëª©ê¸€ -->
				<div class="relative w-full flex flex-col items-center py-20 mt-20 mb-20">
					<div class="scale-container w-full flex justify-between items-center px-4 md:px-0">

						<div class="w-1/2 flex flex-col justify-center p-8">
							<!-- â¬‡â¬‡ ì—¬ê¸°ì— ì´ë¯¸ì§€ ì¶”ê°€ë¨ â¬‡â¬‡ -->
							<img th:src="@{/img/mainpage/mainlogo_1.png}"
								 class="w-[534px] h-[110px] mb-6 drop-shadow-lg">

							<h2 class="text-6xl font-extrabold leading-tight mb-4">
								ë‹¹ì‹ ì˜ ì·¨í–¥ì— ë”± ë§ëŠ” <br>
								ì¶•ì œë¥¼ ì¶”ì²œ ë°›ì•„ë³´ì„¸ìš”!
							</h2>
							<p class="text-xl text-gray-600 mt-4">
								ê°œì¸í™”ëœ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ, ìˆ¨ê²¨ì§„ ë³´ì„ ê°™ì€ ì¶•ì œë“¤ì„ <br>
								í•œëˆˆì— ì‰½ê³  ë¹ ë¥´ê²Œ ì¶”ì²œë°›ì•„ë³´ì„¸ìš”.
							</p>

						</div>

						<div class="w-1/2 flex justify-center items-center p-8">
							<video
									th:src="@{/video/main_video_final_real.mp4}"
									class="w-full aspect-video rounded-xl shadow-md"
									autoplay
									muted
									loop
									playsinline>
							</video>
						</div>
					</div>
				</div>
				<!-- B.ê¸°ëŠ¥ ì„¤ëª… -->
				<div id="main-content-wrapper"
					 class="relative w-full flex flex-col items-center mb-20 overflow-x-hidden overflow-y-hidden">
					<div id="scale-container" class="scale-container relative z-10">
						<h1 class="text-[50px] mt-20 font-black mb-10 text-center">
							ë‹¹ì‹ ë§Œì„ ìœ„í•œ ê¸°ëŠ¥ë“¤ì´ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
						</h1>
						<div class="w-full flex flex-col items-center">
							<div class="flex justify-center gap-10 w-full mb-6">
								<img th:src="@{/img/mainpage/main_asset1.png}" class="h-auto object-contain fade-up-start soft-float wave-delay-1">
								<img th:src="@{/img/mainpage/main_asset2.png}" class="h-auto object-contain fade-up-start soft-float wave-delay-2">
								<img th:src="@{/img/mainpage/main_asset3.png}" class="h-auto object-contain fade-up-start soft-float wave-delay-3">
							</div>
							<div class="flex justify-center w-full gap-10">
								<img th:src="@{/img/mainpage/main_asset4.png}" class="h-auto object-contain fade-up-start soft-float wave-delay-4">
								<img th:src="@{/img/mainpage/main_asset5.png}" class="h-auto object-contain fade-up-start soft-float wave-delay-5">
							</div>
						</div>
					</div>
				</div>

				<!-- C.ë¨¸ì‹ ëŸ¬ë‹ ì„¤ëª… -->
				<div id="second-content-wrapper" class="bg-[#F8F8F8] relative w-full flex flex-col items-center pb-20 overflow-x-hidden overflow-y-hidden">
					<div id="scale-container-2" class="scale-container-2">
						<h1 class="text-[50px] mt-20 font-black mb-10 text-center">
							ê°œì¸í™” ë°ì´í„°ë¥¼ í™œìš©í•œ ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ì¶•ì œ ë§ì¶¤ ì‹œìŠ¤í…œ
						</h1>
						<div class="w-full flex flex-col gap-6 mx-auto">
							<div class="flex justify-start w-full mb-6 gap-10 px-20 flex-nowrap">
								<img th:src="@{/img/mainpage/main_asset6.png}" class="h-auto object-contain slide-left observer-slide">
								<img th:src="@{/img/mainpage/main_asset7.png}" class="h-auto object-contain slide-left observer-slide">
							</div>
							<div class="flex justify-end w-full gap-10 px-20 flex-nowrap">
								<img th:src="@{/img/mainpage/main_asset9.png}" class="h-auto object-contain slide-right observer-slide">
								<img th:src="@{/img/mainpage/main_asset8.png}" class="h-auto object-contain slide-right observer-slide">
							</div>
							<div class="flex justify-start w-full ml-10 mb-6 gap-10 px-20 flex-nowrap">
								<img th:src="@{/img/mainpage/main_asset10.png}" class="h-auto object-contain slide-left observer-slide">
								<img th:src="@{/img/mainpage/main_asset11.png}" class="h-auto object-contain slide-left observer-slide">
							</div>
						</div>
					</div>

				</div>
			</main>

			<!-- D.ì¶•ì œ ë‘˜ëŸ¬ë³´ê¸° -->
			<div class="relative w-full flex flex-col items-center justify-center py-20 h-[600px]">
				<!-- ë°°ê²½ ì´ë¯¸ì§€ -->
				<div class="absolute inset-0">
					<img th:src="@{/img/mainpage/ì§€ë„ë§µ.png}"
						 class="w-full h-full object-cover opacity-30" /> <!-- opacityë¡œ íˆ¬ëª…ë„ ì¡°ì ˆ -->
				</div>

				<!-- ë¬¸êµ¬ -->
				<div class="text-center mt-20 mb-10 relative z-50">
					<h2 class="text-4xl font-extrabold text-gradient">
						ì˜¤ëŠ˜ì€ ì–´ë–¤ ì¶•ì œë¥¼ ì¶”ì²œë°›ì•„ë³´ì‹œê² ì–´ìš”?
					</h2>
				</div>

				<!-- ë²„íŠ¼ -->
				<div class="flex justify-center mt-4 relative z-50">
					<a href="/festivals/festivalMap"
					   class="bg-gradient text-white text-2xl py-4 px-10 rounded-xl shadow-md
              transition-all duration-300 ease-in-out
              hover:bg-gradient2 hover:scale-95">
						ì¶•ì œ ë‘˜ëŸ¬ë³´ê¸°
					</a>
				</div>
			</div>

		</section>

	</body>

	<th:block layout:fragment="script">
		<script>
			document.addEventListener("DOMContentLoaded", () => {

				const targets = document.querySelectorAll(".fade-up-start");
				const observer = new IntersectionObserver((entries, obs) => {
					entries.forEach(entry => {
						if (entry.isIntersecting) {
							const index = [...targets].indexOf(entry.target);

							// ìˆœì°¨ ë”œë ˆì´ ì ìš© (index * 150ms)
							entry.target.style.transitionDelay = `${index * 150}ms`;

							entry.target.classList.add("fade-up-active");

							obs.unobserve(entry.target);
						}
					});
				}, {threshold: 0.2});
				targets.forEach(target => observer.observe(target));

				const slideTargets = document.querySelectorAll(".observer-slide");
				const slideObserver = new IntersectionObserver((entries, obs) => {
					entries.forEach(entry => {
						if (entry.isIntersecting) {
							// í˜„ì¬ ê´€ì°° ëŒ€ìƒì´ slideTargets ì¤‘ ëª‡ ë²ˆì§¸ì¸ì§€ í™•ì¸
							const index = [...slideTargets].indexOf(entry.target);

							// ìˆœì°¨ ë”œë ˆì´ ì ìš© (ì˜ˆ: index * 200ms)
							entry.target.style.animationDelay = `${index * 200}ms`; // ì• ë‹ˆë©”ì´ì…˜ ë”œë ˆì´ ì ìš©!

							if (entry.target.classList.contains("slide-left")) {
								entry.target.classList.add("slide-active-left");
							}
							if (entry.target.classList.contains("slide-right")) {
								entry.target.classList.add("slide-active-right");
							}

							obs.unobserve(entry.target);
						}
					});
				}, { threshold: 0.2 });
				slideTargets.forEach(t => slideObserver.observe(t));

				// ì²« ë²ˆì§¸ ì„¹ì…˜ (Asset 1~5) ë¡œì§
				const scaleContainer = document.getElementById('scale-container');
				const wrapper = document.getElementById('main-content-wrapper');
				const baseWidth = 1440;

				function adjustScale(container, wrapper) {
					let currentWidth = window.innerWidth;
					let scaleFactor = 1;

					if (currentWidth < baseWidth) {
						scaleFactor = currentWidth / baseWidth;
					} else {
						scaleFactor = 1;
					}

					// 1. transformì„ ì¼ì‹œì ìœ¼ë¡œ 1ë¡œ ì„¤ì •í•˜ì—¬ ì›ë˜ ë†’ì´ë¥¼ ì •í™•íˆ ì¸¡ì •
					container.style.transform = 'scale(1)';
					// ğŸ’¡ scrollHeight ëŒ€ì‹  getBoundingClientRect().heightë¥¼ ì‚¬ìš©í•˜ì—¬
					// Border/Paddingì´ í¬í•¨ëœ ì‹¤ì œ ë ˆì´ì•„ì›ƒ ë†’ì´ë¥¼ ì–»ëŠ” ê²ƒì´ ë” ì•ˆì „í•©ë‹ˆë‹¤.
					const originalHeight = container.getBoundingClientRect().height;

					// 2. ë¶€ëª¨(Wrapper)ì˜ ë†’ì´ë¥¼ 'ì›ë˜ ë†’ì´ * ì¶•ì†Œ ë¹„ìœ¨'ë¡œ ì¡°ì •
					const newHeight = originalHeight * scaleFactor;
					wrapper.style.height = `${newHeight}px`;

					// 3. ê³„ì‚°ëœ ì¶•ì†Œ ë¹„ìœ¨ì„ ë‹¤ì‹œ ì ìš©
					container.style.transform = `scale(${scaleFactor})`;
				}

				// ==========================================================
				// ë‘ ë²ˆì§¸ ì„¹ì…˜ (Asset 6~11) ë¡œì§
				const scaleContainer2 = document.getElementById('scale-container-2');
				const wrapper2 = document.getElementById('second-content-wrapper');

				function handleAllScaling() {
					// ë‘ ì„¹ì…˜ ëª¨ë‘ ë™ì¼í•œ í•¨ìˆ˜ í˜¸ì¶œ
					if (scaleContainer && wrapper) {
						adjustScale(scaleContainer, wrapper);
					}
					if (scaleContainer2 && wrapper2) {
						adjustScale(scaleContainer2, wrapper2);
					}
				}

				// ê¸°ì¡´ adjustScale, adjustScale2 ëŒ€ì‹  handleAllScalingì„ í˜¸ì¶œí•©ë‹ˆë‹¤.
				handleAllScaling();

				window.addEventListener('resize', handleAllScaling);

				// ì´ë¯¸ì§€ ë¡œë“œ í›„ ìµœì¢…ì ìœ¼ë¡œ ë‹¤ì‹œ ì¡°ì •
				window.addEventListener('load', handleAllScaling);
			});
		</script>
	</th:block>

</html>

